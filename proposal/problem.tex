\فصل{بیان مسائل و رویکردهای حل مساله}

همانطور که در فصل \رجوع{فصل: کارهای مرتبط} بیان شد مسائل مختلفی در حوزه شبکه‌های توان پایین با برد بالا مطرح است و ما در این پیشنهاد رساله قصد داریم روی مساله ارزیابی کارایی انتها به انتها
در شبکه \متن‌لاتین{LoRaWAN} تمرکز کنیم.

\قسمت{شکاف تحقیقاتی و ضرورت مساله}

در زمان طراحی و پیاده‌سازی یک سیستم انتها به انتها اینترنت اشیا که شامل اجزای مختلفی شامل دروازه، سرور شبکه و سرور اپلیکیشن است،
تصمیم‌های متنوعی مانند انتخاب صحیح ماژولیشن، ساختار و کدگذاری اطلاعات\پانویس{Data Model and Encoding}، وجود دارند که ممکن است
یک پاسخ بهینه نداشته باشند \مرجع{SanchezIborra2016}. این تصمیم‌ها اما در نهایت بر معیارهای کارآیی سیستم شامل بهره‌وری، تاخیر و نرخ دریافت بسته‌ها تاثیر گذاشته و می‌توانند
باعث شکست کامل سیستم در رسیدن به پارامترهای مطلوب خود شوند.
پژوهش‌های زیادی به ارزیابی این اجزا پرداخته‌اند، اما هنوز
مساله ارتباط این اجزا و تاثیر آن‌ها بر یکدیگر که بر معیارهای کارایی نهایی سیستم نیز تاثیر دارد، در یک سیستم انتها به انتها نیاز به ارزیابی دارد.
همانطور که در پژوهش \مرجع{FernandesCarvalho2019} آمده است، شبکه‌های \متن‌لاتین{LoRaWAN} بیشتر پیچیدگی را
در \متن‌لاتین{Backend} قرار داده‌اند و بنابراین در کنار شبکه دسترسی، شبکه‌ی هسته نیز تاثیر زیادی در کارایی دارد.
از سوی دیگر تعریف باز ارائه شده توسط استاندارد، اجازه پیاده‌سازی‌های گوناگونی را می‌دهد که مقایسه آن‌ها را مساله‌ی مهمی می‌کند
\مرجع{FernandesCarvalho2019}.
اینترنت اشیا و شبکه‌های \متن‌لاتین{LoRaWAN} به عنوان یکی از نمونه‌های مهم آن،
با توجه به نیاز پشتیبانی از تعداد زیاد کاربران و گذردهی بالا در جهت پردازش داده، راهکاری مشخص برای مقیاس‌پذیری و کارایی لازم دارد
\مرجع{Vresk2016}.
بنابراین ارزیابی کارایی این پیاده‌سازی‌ها، پارامترها و ارائه یک ساختار از تاثیر آن‌ها بر معیارهای کارایی انتها به انتها
مساله‌ای است که با توجه به دانش این پیشنهاد رساله، به آن پرداخته نشده است.

یک بسته را در یک سیستم انتها به انتها، در نظر می‌گیریم. در ابتدا این بسته می‌بایست به واسطه ماژولیشن لایه فیزیکی ارسال شود.
پارامترهای ماژولیشن مانند فاکتور گسترش، نرخ ارسال و زمان ارسال برای این بسته، مشخص می‌شوند و بر تاخیر بسته تاثیر می‌گذارند.
در ادامه ارسال این بسته، ممکن است تصادم رخ دهد و باعث شود که برای ارسال بسته نیاز به باز ارسال
یا صبر کردن وجود داشته باشد. این مساله متاثر از لایه مدیریت دسترسی همزمان است. بعد از گذشت از لایه دسترسی به بسته به دروازه
می‌رسد.
با وجود اینکه عموم تحقیقات در این حوزه رسیدن بسته تا دروازه را هدف قرار داده‌اند اما تاخیر در شبکه هسته نیز اهمیت بالایی
دارد همانطور که در پژوهش‌های \مرجع{Carvalho2019}، \مرجع{Carvalho2018}، \مرجع{FernandesCarvalho2019} و \مرجع{Potsch2019} به آن پرداخته شده است.
در دروازه عملیات تبدیل پروتکل صورت گرفته و داده روی بستر \متن‌لاتین{IP} ارسال می‌شود تا به دست سرور شبکه برسد.
در سرور شبکه بسته‌های تکراری حذف می‌شوند، که کارایی این الگوریتم تشخیص و حذف بسته‌های تکراری، می‌تواند بر تاخیر بسته تاثیر داشته باشد. از سوی دیگر در سرور شبکه
مکانیزم نرخ داده تطبیق‌پذیر اجرا می‌شود که بر کارایی لایه دسترسی تاثیر می‌گذارد. این مکانیزم می‌تواند با استفاده از ویژگی عمود بودن فاکتورهای گسترش
از نرخ تصادم در لایه دسترسی بکاهد. الگوریتمی که در سرور شبکه برای رمزگشایی بسته استفاده می‌شود، بر زمان رسیدن به بسته تاثیر می‌گذارد.
بعد از سرور شبکه نیاز است بسته به دست سرور اپلیکشن و پلتفرم برسد و در نهایت اپلیکیشن برسد. پروتکل‌های این مسیر بر تاخیر بسته تاثیر گذاشته
و مشابه سرور شبکه در سرور اپلیکیشن هم الگوریتم رمزگشایی صورت می‌پذیرد که می‌تواند تاخیر بسته را افزایش دهد.
در پلتفرم می‌بایست ساختار و کدگذاری اطلاعات به گونه‌ای تغییر کند که اپلیشکن‌های گوناگون بتوانند به صورت یکسان و به سادگی از آن استفاده کنند،
این نیازمندی باعث انجام عملیات تبدیل پروتکل می‌شود که می‌تواند بر تاخیر رسیدن بسته تاثیر داشته باشد. از سوی دیگر این ساختار اطلاعاتی
اگر استاندارد نباشد، نیاز است که پلتفرم از کاربر بخواهد که خود این الگوریتم را پیاده‌سازی کند که در صورت بهینه نبودن پیاده‌سازی، می‌تواند باعث
افزایش چشم‌گیر تاخیر شود.
بنابراین در یک مسیر انتها به انتها برای یک بسته و تنها یک شاخص کارایی، انتخاب‌ها و پارامترهای موثر زیادی وجود دارد
که در زمان طراحی یک سیستم اینترنت اشیا می‌بایست به آن‌ها پرداخته شود و ارزیابی دقیق این پارامترها و کمک به انتخاب صحیح آن‌ها
مساله‌ای است که این پیشنهاد رساله قصد پرداختن به آن را دارد.

اگر شاخص نرخ دریافت را مدنظر قرار دهیم، پارامترهایی چون انتخاب ماژولیشن می‌تواند بر میزان نویز تاثیر گذاشته و باعث از دست رفتن بسته شود.
اما با رسیدن بسته به دروازه‌ها هنوز هم امکان از دست رفتن بسته در زیرساخت‌هایی چون کارگزار پیام \متن‌لاتین{MQTT} یا در سرورهای
شبکه یا اپلیکشن به علت حجم زیاد بسته‌ها، افزایش طول صف و افزایش تاخیر وجود دارد.

اگر شاخص بهره‌وری را در نظر بگیریم، انتخاب ساختار داده و کدگذاری آن باعث می‌شود تا اندازه سرآیند و داده اصلی مشخص شود.
در ادامه اگر از ارسال با تاییدیه استفاده کنیم، سرور شبکه می‌بایست به واسطه دروازه تاییدیه ارسال کند و در صورتی
که این تاییدیه در لایه هسته (ارتباط میان سرور شبکه و دروازه) یا لایه دسترسی گم شود باعث می‌شود تا شی
دوباره ارسال را تکرار کند که توان مصرفی را افزایش داده و بهره‌وری را کاهش می‌دهد.

اگر بخواهیم از دیدگاه کاربردهای اینترنت اشیا به اهمیت این مساله بپردازیم می‌توانیم به کاربردهایی چون سلامت هوشمند اشاره کنیم.
در سلامت هوشمند نیاز است که داده‌های حیاتی بیماران در یک بازه زمانی مشخص و با الویت‌بندی مناسب دریافت شوند که این امر
نشان دهنده‌ی اهمیت پارامترهای کیفیت سرویس است \مرجع{Govindan2015}.

در ادامه، در جدول \رجوع{جدول: پارامترهای کارایی و پارامترهای موثر بر آن‌ها به تفکیک اجزای معماری}
به طور خلاصه بخشی از پارامترهای موثر در هر یک از اجزا سیستم،
بر شاخص‌های نرخ دریافت بسته، تاخیر (\مرجع{Liang2020}) و بهره‌وری را مرور می‌کنیم.

\شروع{sidewaystable}

\شرح{پارامترهای کارایی و پارامترهای موثر بر آن‌ها به تفکیک اجزای معماری شکل \رجوع{شکل: معماری انتها به انتها سیستم مورد ارزیابی}}
\برچسب{جدول: پارامترهای کارایی و پارامترهای موثر بر آن‌ها به تفکیک اجزای معماری}
\فضای‌و{5mm}
\تنظیم‌ازوسط
\اندازه‌پانویس

\begin{tabularx}
  {\textwidth}
  {|X|X|X|}

  \خط‌بالا

  شاخص &
  ارزیابی شبکه دسترسی \متن‌لاتین{LoRaWAN} از دروازه تا سرور شبکه و سرور اپلیکیشن \مرجع{Potsch2017} \مرجع{Potsch2019} &
  ارزیابی لایه کاربرد شبکه \متن‌لاتین{LoRaWAN} از گره تا اپلیکیشن \مرجع{Potsch2019} \\

  \خط‌بالا

  تاخیر &

  \شروع{فقرات}
  \فقره تاخیر استفاده از \متن‌لاتین{IPv6} و \متن‌لاتین{SCHC}
  \فقره تاخیر ارسال از دروازه بر بستر \متن‌لاتین{IP}
  \فقره تاخیر صف و پردازش در شبکه \متن‌لاتین{IP} میان دروازه و سرور شبکه
  \فقره تاخیر پردازش در سرور شبکه
  \فقره تاخیر صف و پردازش در شبکه \متن‌لاتین{IP} میان سرور شبکه و سرور اپلیکیشن
  \فقره تاخیر پردازش در سرور اپلیکیشن
  \فقره تاخیر صف و پردازش در شبکه \متن‌لاتین{IP} میان سرور اپلیکیشن و پلتفرم
  \پایان{فقرات}

  &

  \شروع{فقرات}
  \فقره تاخیر کدگذاری داده در گره
  \فقره تاخیر کدگذاری داده در پلتفرم
  \فقره تاخیر تجزیه\پانویس{Parse} کردن داده‌ها در پلتفرم
  \پایان{فقرات}

  \\

  نرخ از دست رفت بسته &

  \شروع{فقرات}
  \فقره از دست رفت بسته در شبکه \متن‌لاتین{IP} میان دروازه و سرور شبکه
  \فقره از دست رفت بسته در سرور شبکه
  \فقره از دست رفت بسته در شبکه \متن‌لاتین{IP} میان سرور شبکه و سرور اپلیکیشن
  \فقره از دست رفت بسته در سرور اپلیکیشن
  \فقره از دست رفت بسته در شبکه \متن‌لاتین{IP} میان سرور اپلیکیشن و پلتفرم
  \پایان{فقرات}

  &

  \شروع{فقرات}
  \فقره پروتکل ارتباطی
  \پایان{فقرات}

  \\

  بهره‌وری &

  \شروع{فقرات}
  \فقره بهره‌وری پروتکل ارتباطی شبکه میان دروازه و سرور شبکه
  \فقره بهره‌وری پروتکل ارتباطی شبکه میان سرور شبکه و سرور اپلیکیشن
  \فقره بهره‌وری پروتکل ارتباطی شبکه میان سرور اپلیکیشن و پلتفرم
  \پایان{فقرات}

  &

  \شروع{فقرات}
  \فقره بهره‌وری پروتکل ارتباطی
  \پایان{فقرات}

  \\

  \خط‌پایین

\end{tabularx}

\پایان{sidewaystable}

\قسمت{بیان مسائل}

مسائل این پیشنهاد رساله، ارزیابی شبکه دسترسی \متن‌لاتین{LoRaWAN} از دروازه تا سرور شبکه و سرور اپلیکیشن و ارزیابی لایه کاربرد شبکه \متن‌لاتین{LoRaWAN} از گره تا اپلیکیشن است.
یک شبکه \متن‌لاتین{LoRaWAN} است، این شبکه اجزای مختلفی دارد که هر یک از این اجزا در کارایی کلی سیستم تاثیر دارند.
معماری کلی سیستمی که قصد ارزیابی آن را داریم در شکل \رجوع{شکل: معماری انتها به انتها سیستم مورد ارزیابی} آورده شده است.
از پایین‌ترین لایه، لایه‌ی فیزیکی مبتنی بر فناوری \متن‌لاتین{LoRa} وجود دارد.
در لایه پیوند داده \متن‌لاتین{LoRaWAN} قرار دارد.
قسمت بعدی در این معماری دروازه‌ها هستند که می‌توانند بخشی از پردازش لبه را نیز انجام بدهند. در صورتی که در لایه‌ی شبکه بخواهیم از پروتکل \متن‌لاتین{IPv6} استفاده کنیم
دروازه می‌تواند یکی از انتخاب‌ها برای تبدیل پروتکل از نسخه‌ی فشرده‌شده به نسخه اصلی \متن‌لاتین{IPv6} باشد.
در ادامه \متن‌لاتین{Network Server} یا سرور شبکه قرار دارد. در این مرحله انتخاب پیاده‌سازی خود سرور شبکه و از سوی دیگر لینک ارتباطی آن با
دروازه‌ها انتخاب‌های زیادی را ایجاد می‌کند. از سوی دیگر سرور شبکه خود الگوریتم‌های مهمی از جمله نرخ داده تطبیق‌پذیر، احراز هویت، شناسایی و حذف بسته‌های تکراری را شامل می‌شود
که پیاده‌سازی و انتخاب آن تاثیر زیادی در کارایی شبکه خواهد داشت. انتخاب مرسوم‌تر برای تبدیل پروتکل \متن‌لاتین{IPv6} سرور شبکه است چرا که در این مرحله داده‌های تکراری دریافت شده از
دروازه‌ها حذف شده است.
لایه بعدی سرور اپلیکشن است، برای ارتباط سرور اپلیکشن با سرور شبکه انتخاب‌های زیادی دارد که البته به پیاده‌سازی انتخابی برای این سرور شبکه و اپلیکیشن نیز وابسته است
و ممکن است قابل تغییر نباشد. کارایی سرور اپلیکیشن در رمزگشایی و از سوی دیگر تبدیل‌های پروتکلی لازم می‌تواند تاثیر به سزایی در کارایی سیستم داشته باشد.
سرور اپلکیشن در نهایت داده را در اختیار پلتفرم قرار می‌دهد. پلتفرم‌های زیادی موجود هستند که هر یک ویژگی‌های متفاوتی دارند.
این پلتفرم‌ها می‌توانند به صورت متن‌باز یا تجاری باشند و برخی نسخه‌ی ابری نیز دارند.
یکی از قسمت‌های مهم
در پلتفرم چگونگی پردازش داده‌های دریافتی و ساختار داده‌ای اشیا است. در این زمینه تلاش‌های زیادی برای استاندارد سازی صورت پذیرفته است که می‌توان از
جمله‌ی آن‌ها به \متن‌لاتین{OneDM} از \متن‌لاتین{ETSI} و \متن‌لاتین{SenML} از \متن‌لاتین{IETF} اشاره کرد. استفاده از این استانداردها یکپارچگی
بیشتری فراهم می‌آورد و البته می‌تواند سربار هم داشته باشد و این مساله را می‌توان در این ارزیابی انتها به انتها مورد توجه قرار داد.
از سوی دیگر پلتفرم‌ها عموما سرویس‌هایی مانند اکتشاف، عیب‌یابی و \نقاط‌خ را نیز ارائه می‌دهند که یک مدل اطلاعاتی مشترک می‌تواند باعث شود تا آن‌ها
بتوانند اشیای متنوع‌تری را پشتیبانی کنند.
لازم به ذکر است که مساله ساختار داده‌ای تنها در لایه پلتفرم مطرح نیست، در صورتی که از پردازش لبه یا پردازش مِه استفاده شود گرههای پردازشی این لایه
هم برای همکنش‌پذیری به یک ساختار داده‌ای و اطلاعاتی یکسان، نیازمند هستند.
در نهایت داده‌های جمع‌اوری و پردازش شده در پلتفرم در کنار سایر سرویس‌ها مانند مدیریت اشیا در اختیار کاربران و سایر برنامه‌های کاربردی قرار می‌گیرد.
برنامه‌های کاربردی می‌توانند نیازمندی‌های متفاوتی از جمله نیازمندی‌های کیفیت سرویس داشته باشند و در این ارزیابی انتها به انتها می‌توانیم این نیازمندی‌ها را
نیز مورد توجه قرار دهیم.
این پارامترهای موثر در جدول \رجوع{جدول: پارامترهای کارایی و پارامترهای موثر بر آن‌ها به تفکیک اجزای معماری} برای مسائل پیشنهادی این رساله دسته‌بندی شده‌اند.

\شروع{sidewaysfigure}
\درج‌تصویر[width=\textwidth]{./img/e2e-iot-lorawan.png}
\تنظیم‌ازوسط
\شرح{معماری انتها به انتها سیستم مورد ارزیابی و معرفی کوتاه هر قسمت}
\برچسب{شکل: معماری انتها به انتها سیستم مورد ارزیابی}
\پایان{sidewaysfigure}

معیار‌های عملکردی مورد ارزیابی به قرار زیر خواهند بود:

\شروع{فقرات}

\فقره \متن‌سیاه{تاخیر}: مدت زمانی است که بسته برای رسیدن به اپلیکشن در یک سیستم انتها به انتها طی می‌کند. این معیار برای
اجزای سیستم نیز می‌تواند به صورت مستقل تعریف شود.

\فقره \متن‌سیاه{نرخ دریافت بسته‌ها}: نسبت تعداد بسته‌هایی که به درستی در اپلیکشن دریافت می‌شوند به کل بسته‌های ارسالی است (\مرجع{Liang2020} و \مرجع{Jang2010}).
این معیار برای اجزای سیستم
نیز می‌تواند به صورت مستقل تعریف شود. بسته‌ها هم در شبکه هسته و هم در شبکه دسترسی می‌توانند از دست بروند.

\فقره \متن‌سیاه{بهره‌وری}: نسبت داده‌ی دریافتی به داده و سرآیند ارسالی. این معیار می‌تواند به صورت انتها به انتها یا تنها برای بخشی
از سیستم محاسبه شود. با توجه به تبدیل پروتکلی که در سیستم صورت می‌گیرد در بعضی از موارد ممکن است این پارامتر مقداری
بیشتر از یک داشته باشد چرا که به طور مثال در شبکه دسترسی ممکن است از فشرده‌سازی سرآیند استفاده شده باشد و در ادامه بسته‌ها در شبکه هسته
از حالت فشرده خارج شوند.

\فقره \متن‌سیاه{حجم داده ارسالی}: داده‌هایی که بین هر یک از اجزا شبکه جابجا می‌شوند می‌توانند شامل ابرداده‌هایی از جمله
کیفیت دریافت و زمان دریافت باشند. این امر باعث می‌شود که حجم داده‌ی منتقل شده بین سرویس‌ها تغییر کند.

\پایان{فقرات}

از سوی دیگر پارامترهای موثر به شرح زیر خواهند بود. این پارامترها می‌توانند در ارزیابی‌ها گزارش می‌شوند و ممکن است برخی از آن‌ها
مقدار عددی نداشته باشند.

\شروع{فقرات}
\فقره نرخ ارسال اشیا
\فقره تعداد اشیا
\فقره نیازمندی‌های کیفیت سرویس اشیا
\فقره تنوع اشیا، ساختار داده‌ها و مدل اطلاعاتی
\فقره پروتکل‌های ارتباطی
\فقره الگوریتم‌نرخ داده تطبیق‌پذیر
\فقره شیوه استقرار سرویس‌های نرم‌افزاری (استفاده از ماشین‌های فیزیکی، مجازی یا سرورهای ابری)
\فقره زبان برنامه‌نویسی
\فقره معماری نرم‌افزاری
\پایان{فقرات}

نگاه دیگر به این سیستم نگاه لایه‌ای خواهد بود. در نگاه لایه‌ای بسته در شبکه‌ی دسترسی با لایه‌ی فیزیکی \متن‌لاتین{LoRa} بوده و با ورود به لایه هسته،
لایه فیزیکی آن تغییر کرده و می‌تواند لایه‌های بالاتر آن نیز تغییر کرده یا بدون تغییر باقی بمانند. برای این لایه‌های بالاتر انتخاب‌های مختلفی وجود دارد.
خلاصه‌ای از این انتخاب‌ها در شکل \رجوع{شکل: مدل انتها به انتها لایه‌ای داده‌ّها} دیده می‌شود.
تبدیل پروتکل در لایه هسته می‌تواند بیش از یکبار هم صورت بپذیرد که در این صورت مدل‌های لایه‌ای بیشتری خواهیم داشت. هر یک از این تبدیل‌ها
سربار دارد و انتخاب مناسب پروتکل‌ها و تبدیل‌ها می‌تواند تاثیر زیادی بر کارایی سیستم داشته باشد.

یکی از انتخاب‌های مطرح، استفاده از \متن‌لاتین{IPv6} و \متن‌لاتین{UDP} در لایه دسترسی و تبدیل آن به پروتکل اصلی در لایه هسته است. با این روش
اشیا عملا به صورت مستقیم به شبکه اینترنت متصل شده و با آدرس \متن‌لاتین{IP} مورد دسترسی قرار می‌گیرند.

\شروع{شکل}
\درج‌تصویر[width=\textwidth]{./img/e2e-iot-layered.png}
\تنظیم‌ازوسط
\شرح{مدل انتها به انتها لایه‌ای داده‌ها}
\برچسب{شکل: مدل انتها به انتها لایه‌ای داده‌ّها}
\پایان{شکل}

در رابطه با تاخیر، بیشترین معیارهای استفاده شده شامل تاخیر یک طرفه، تاخیر رفت و برگشت (\متن‌لاتین{RTT}) و تغییرات تاخیر (\متن‌لاتین{jitter}) است.
اگر بخواهیم شبکه اینترنت را در نظر بگیریم، تاخیر یک طرفه در قالب \متن‌لاتین{RFC2679} با نام \متن‌لاتین{OWD} (\متن‌لاتین{one-way delay}) به عنوان مدت زمان
سپری شده تا رسیدن اولین بیت بسته به مقصد،
معرفی می‌شود. تاخیر رفت و برگشت در قالب \متن‌لاتین{RFC2681} با نام \متن‌لاتین{RTD} (\متن‌لاتین{round trip delay}) و به عنوان مدت زمانی
که از ارسال بسته از مبدا و دریافت پاسخ آن از مقصد سپری می‌شود، تعریف شده است.
در نهایت تغییرات تاخیر در قالب \متن‌لاتین{RFC3393} با نام \متن‌لاتین{IPDV} (\متن‌لاتین{Inter Packet Delay Variation}) و به عنوان
تغییرات تاخیر در یک جفت بسته انتخابی، تعریف شده است
\مرجع{Ferrari2018}.

\زیرقسمت{ارزیابی شبکه دسترسی \متن‌لاتین{LoRaWAN} از دروازه تا سرور شبکه و سرور اپلیکیشن}

همانطور که بیان شد در شبکه‌های \متن‌لاتین{LoRaWAN} یک ساختار مشخص به عنوان زیرساخت \متن‌لاتین{IP} وجود دارد.
این زیرساخت تاثیر زیادی بر نرخ داده، حجم داده، تعداد حسگرها و \نقاط‌خ دارد. پیش‌بینی منابع مورد نیاز و معماری آن از مراحل مهم طراحی یک شبکه \متن‌لاتین{LoRaWAN} است.
در پژوهش \مرجع{sensors-20-06721} به مشکل از دست رفتن پیام‌ها در لایه \متن‌لاتین{IP} اشاره شد، که البته به آن پرداخته نشده بود،
و یا پژوهش \مرجع{Carvalho2019} به رخداد تاخیرهای بسیار زیاد در سرورهای شبکه و اپلیکیشن \متن‌لاتین{LoRaWAN} اشاره می‌کند
که خود نمایانگر اهمیت این موضوع است.

در ادامه می‌توان به تاثیر رویه ارسال و نرخ ارسال داده‌ها برای کارآیی کلی شبکه هسته اشاره کرد.
اشیا می‌توانند به سه روش کلی زیر ارسال داده داشته باشند که هر یک نیازمندی‌های کیفیت سرویس خاص خود را ایجاد می‌کند.

\شروع{فقرات}
\فقره \متن‌لاتین{Periodic}: در این روش اشیا به صورت دوره‌ای داده را ارسال می‌کنند.
\فقره \متن‌لاتین{Self Triggered}: در این روش اشیا در فواصل زمانی گوناگون داده‌ای را ارسال می‌کنند که اهمیت بالایی داشته و می‌بایست در بازه زمانی مشخصی دریافت شود.
\فقره \متن‌لاتین{Trigger by Event}: در این روش اشیا به یک رویداد خارجی داده را ارسال می‌کنند.
\پایان{فقرات}

شبکه‌ی هسته می‌بایست بین بسته‌های دریافتی بسته‌های با اولویت بیشتر را پردازش کند و الگوریتم‌زمان‌بندی داشته باشد و یکی از نیازمندی‌ها، در اعلان‌های مهم، داشتن یک کران بالا برای تاخیر است.
چرا که در شبکه‌های اینترنت اشیا کلاس‌های مختلفی از داده می‌توانند حضور داشته باشند و به جز شبکه‌ی دسترسی، شبکه‌ی هسته نیز در برآورده شدن کیفیت سرویس مورد نظر آن‌ها موثر است.

در نهایت می‌توان با استفاده از چهارچوب‌های ریاضی تئوری صف و \متن‌لاتین{Network Calculus} که پیشتر به آن اشاره شد،
تاخیر میانگین و کران بالای تاخیر را برای اجزای مختلف این سیستم از جمله
سرور \متن‌لاتین{MQTT} بدست آورد و آن را با مقادیر بدست آمده در آزمایش‌های عملی
مقایسه کرد.

از سوی دیگر همانطور که اشاره شد در کنار شبکه‌های \متن‌لاتین{LoRaWAN}، شبکه‌هایی نیز وجود دارند
که تنها از لایه‌ی فیزیکی \متن‌لاتین{LoRa} استفاده کرده‌اند که از جمله‌ی آن‌ها می‌توان به \متن‌لاتین{Meshed LoRa}
اشاره کرد. در این پژوهش در کنار ارزیابی شبکه \متن‌لاتین{LoRaWAN} می‌توان \متن‌لاتین{Backbone} مربوط
به این شبکه و تاثیر معماری آن‌ها در \متن‌لاتین{Backbone} پرداخت.

در نهایت با توجه گسترده این معماری (شکل \رجوع{شکل: معماری انتها به انتها سیستم مورد ارزیابی})،
تلاش می‌کنیم اجزای مختلف آن را جدا کرده و آن‌ها را در قالب زیرمسائلی بررسی کنیم تا بتوانیم
با در کنار هم نهادن این زیرمسائل، مساله ارزیابی انتها به انتها را شفاف‌تر بررسی کنیم.

\زیرزیرقسمت{ارزیابی کارایی سرورهای \متن‌لاتین{MQTT} و \متن‌لاتین{NATS}}

با توجه به گسترش روزافزون اینترنت اشیا و تعداد اشیا متصل، نیاز به پلتفرم‌های گسترش پذیر برای مدیریت ارتباط این اشیا و جمع‌اوری پیام‌های آن‌ها
از مسائل مهم در این حوزه است. یکی از اجزا مهم در همه پلتفرم‌های اینترنت اشیا و معماری مورد ارزیابی این رساله کارگزار‌های پیام هستند. یکی از
معروفترین پروتکل‌های انتشار و اشتراک پروتکل \متن‌لاتین{MQTT} است ولی پروتکل‌های دیگری با این معماری مانند \متن‌لاتین{NATS} یا
\متن‌لاتین{CoAP} هم در این حوزه وجود دارند. حتی در رابطه با معماری مورد بحث این رساله سایر ساختارهای ارتباطی مانند درخواست و پاسخ
هم می‌توانند مورد استفاده قرار بگیرند و برای رسیدن به کارایی بهینه می‌بایست مورد ارزیابی قرار بگیرند.

همانطور که پیشتر ارائه شد، پژوهش‌های زیادی به ارزیابی کارایی سرورهای \متن‌لاتین{MQTT} پرداخته‌اند اما پارامترهای زیادی مانند تعداد کانکشن‌های باز،
منابع مصرفی، ابرزی بودن و چگونگی گسترش‌پذیری در این سرورها مسائلی هستند که هنوز نیاز به ارزیابی دارد.
از سوی دیگر این سرورها با توجه به تنوع داده‌های ورودی نیاز به پشتیبانی
از اولویت‌ها دارند و بحث در رابطه با کران بالای تاخیر در آن‌ها بر پایه \متن‌لاتین{Network Calculus}
و استفاده از تئوری صف برای یافتن حالت میانه مطالبی است که پیشتر به آن‌ها پرداخته نشده است و می‌تواند پشتیبانی
از کیفیت سرویس‌های مختلف را به ارمغان بیاورد.

سرور و پروتکل \متن‌لاتین{NATS} که به صورت متن باز منتشر شده است نسبت به \متن‌لاتین{MQTT} ساده‌تر بوده و سربار کمتری دارد. ارزیابی آن
برای پیاده‌سازی در اشیا و مقایسه آن با \متن‌لاتین{MQTT} می‌تواند راهکار ساده‌تر و با سربار کمتری برای ارتباط در اینتنرت اشیا ارائه کند.
البته پروتکل \متن‌لاتین{NATS} تنها کیفیت سرویس ``صفر'' از پروتکل \متن‌لاتین{MQTT} پشتیبانی می‌کند و برای کیفیت سرویس بالاتر نیاز به
پروتکل \متن‌لاتین{NATS Jetstream} است که پیچیدگی بیشتری داشته اما کیفیت سرویس ``یک'' از \متن‌لاتین{MQTT} فراهم می‌آورد.
مقایسه این دو پروتکل در کیفیت سرویس‌های مختلف می‌تواند باعث انتخاب درستی شود که در نهایت کارایی انتها به انتها را بهبود ببخشد.

از سوی دیگر همانطور که در فصل \رجوع{فصل: مفاهیم} هم اشاره شد، یک ارتباط مهم در معماری زیرساخت \متن‌لاتین{IP} در شبکه‌های \متن‌لاتین{LoRaWAN}،
ارتباط \متن‌لاتین{AS-hNS} است (ارتباط میان \متن‌لاتین{Network Server} و \متن‌لاتین{Application Server})
که در سامانه متن‌باز \متن‌لاتین{Chirpstack} و بیشتر سامانه‌ها با پروتکل \متن‌لاتین{MQTT} پیاده‌سازی شده است.
این ارزیابی به انتخاب پروتکل صحیح برای این ارتباط نیز کمک مهمی خواهد کرد.

\زیرزیرقسمت{ارزیابی زیرساخت \متن‌لاتین{IPv6} در شبکه‌های \متن‌لاتین{LoRaWAN}}

کارگروه \متن‌لاتین{lpwan} در بدنه استاندارسازی \متن‌لاتین{IETF} برای استفاده از \متن‌لاتین{IPv6} در شبکه‌های \متن‌لاتین{LoRaWAN} استانداردهای زیادی را منتشر کرده است (\مرجع{rfc8376} \مرجع{rfc9011}).
این استانداردها می‌بایست ارزیابی شوند که البته پژوهش‌هایی به این امر پرداخته‌اند،
این پژوهش‌ها عمدتا لایه دسترسی را هدف قرار داده‌اند و به این ترتیب نتیجه‌گیری کرده‌اند استانداردهای
ارائه شده برای \متن‌لاتین{IPv6} و استفاده از آن‌ها کارایی کمی دارد. این در حالی است که ارزیابی انتها
به انتها می‌تواند موارد بیشتری را مشخص کند.

\زیرقسمت{ارزیابی لایه کاربرد شبکه \متن‌لاتین{LoRaWAN} از گره تا اپلیکیشن}

یک لایه مهم در اینترنت اشیا، لایه اپلیکشن و پلتفرم است. بعد از جمع‌اوری داده‌ها در شبکه‌های \متن‌لاتین{LoRaWAN} نوبت به پردازش‌هایی مانند دسته‌بندی و صحت‌سنجی
آن‌ها می‌رسد. دو مساله کلی در اینجا مطرح است،
مدل داده‌ای حسگرها و کدگذاری استفاده شده در داده‌های دریافتی و ارسالی.
تلاش بر این است که این موضوع‌ها به صورت یکسان و استاندارد شده صورت بگیرند و از این رو استانداردهای
\متن‌لاتین{Semantic Definition Format} و \متن‌لاتین{Sensor Measurement List} (\مرجع{rfc8428})
به ترتیب برای مدل داده‌ای و کدگذاری مطرح شده‌اند.
بدنه‌های استانداردسازی \متن‌لاتین{ETSI} و \متن‌لاتین{IETF} مستندات زیادی در این حوزه ارائه کرده‌اند.

مساله‌ای که به آن پرداخته نشده است، بحث تاثیر چنین استاندارد‌هایی بر کارایی لایه‌های مختلف شبکه توان پایین با برد بالا است که پیشنهاد رساله حاضر قصد ارزیابی آن را
در شبکه‌ی \متن‌لاتین{LoRaWAN} را دارد.
می‌توان با ارزیابی این موارد کارایی این استانداردها را مشخص کرده و از سوی دیگر راه را برای رسیدن به یک زیرساخت مشترک مدیریت یکسان اشیا هموار کرد.

از سوی دیگر همانطور که در مرور کارهای مرتبط به آن پرداخته شد،
یکی از مسائلی که پژوهش‌های متنوعی روی آن انجام شده است پشتیبانی اشیا از چند شبکه ارتباطی و انتخاب شبکه‌ای با بهترین
پارامترها است. در این مساله مهم است که اشیا یک تعریف استاندارد داشته باشند تا بتوان در لایه پلتفرم آن‌ها را به صورت خودکار در سرورهای شبکه‌ای ثبت کرد.
و همانطور که در پژوهش \مرجع{Chen2019} آمده بود، یکی از چالش‌های اصلی برای این شبکه‌های ترکیبی چگونگی پیاده‌سازی آن‌ها بر پایه بسترهای موجود است.

\قسمت{روش پیشنهادی}

سرویس‌های شبکه‌ای می‌توانند به روش‌های مختلفی آنالیز و مدل‌سازی شوند.
بهینه‌سازی، آنالیز و مشخص کردن ابعاد یک سرویس در صورتی که بخواهد عمیق باشد، می‌تواند در سه گروه قرار بگیرد
\مرجع{Baiocchi2020}:
\شروع{شمارش}
\فقره مدل‌های تحلیلی
\فقره شبیه‌سازی
\فقره آزمایش
\پایان{شمارش}

مدل‌های تحلیلی، توصیف ریاضی از سیستم را فراهم می‌آورند که منجر به تحلیل قابل حل (فرمول بسته) یا بیشتر مواقع بررسی عددی می‌شوند.
این شیوه قدرتمند‌ترین روش برای فهم سریع و غیرشهودی مصالحه‌های کارکردی، اندازه‌گیری کران‌های پایداری سیستم،
اندازه‌گیری تاثیر پارامترهای سیستم بر کارایی، مشخص محیط برای بیان مسائل بهینه‌سازی است
\مرجع{Baiocchi2020}.

با وجود اینکه تولید یک مدل تحلیلی کارا نیازمند مطالعه کامل و مقداری خلاقیت برای پیدا کردن بهترین تعادل میان
فرض‌های ساده‌سازی و یک مدل واقعی است، اما زمان و محاسبات لازم برای یک مدل تحلیلی آن را به گزینه‌ای با بهینه‌ترین
هزینه در میان روش‌های یاد شده، تبدیل می‌کند.
سختی اصلی مدل‌های تحلیلی بیان ساده‌شده و نه آسانتر مساله است. به طور مثال مدل جریان در شبکه‌های کامپیوتری
که ماهیت بسته‌ای ترافیک را در شبکه‌های ارتباطی کاملا از بین می‌برد برای مطالعه یک الگوریتم کنترل ازدحام می‌تواند
مناسب باشد اما برای بررسی احتمال تصادم در یک شبکه با دسترسی تصادفی کافی نیست
\مرجع{Baiocchi2020}.
در میان مدل‌های تحلیلی، یک نقش مهم بر عهده تئوری فرآیندهای تصادفی و تئوری صف است
\مرجع{Baiocchi2020}.

شبیه‌سازی کامپیوتری عبارت است از تعریف یک مدل عملیاتی با جزئیات از سیستم و بازتولید
همه پروسه‌های دخیل در آن به وسیله‌ی یک برنامه کامپیوتری است.
این یک سیستم واقعی نیست بلکه یک نسخه مجازی از کارکرد نسخه‌ی ساده شده سیستم اصلی است.
محدودیت‌های این روش، محدودیت‌های زبان برنامه‌نویسی و منابع محاسباتی موجود است
\مرجع{Baiocchi2020}.

آخرین روش آزمایش‌های واقعی بر روی یک نمونه کوچک شده از سیستم است.
در این شیوه نیاز به هیچ مفروضات و ساده‌سازی نیست.
با این وجود، در این روش نیاز به زمان توسعه، سطح مهارتی و در عین حال هزینه لوازم نسبت به شبیه‌سازی کامپیوتری بسیار بیشتر است
اما این روش تنها راه برای ارائه مدارک دال بر امکان پیاده‌سازی سیستم یا حداقل بخشی‌هایی از آن و در ادامه حمایت از مفروضات شبیه‌سازی
و مدل تحلیلی بر پایه داده‌های واقعی است.
\مرجع{Baiocchi2020}.

در نهایت شبیه‌سازی کامپیوتری و آزمایش‌های واقعی مدارکی دال بر اینکه آیا تئوری در قالب فناوری‌های حاضر و موقعیت‌های برنامه
به خوبی پایه‌ریزی شده است، ارائه می‌دهند
\مرجع{Baiocchi2020}.

در این رساله نیز همین روند را برای بررسی و حل مساله طی می‌کنیم. در ابتدا با استفاده از شبیه‌سازی و مدل‌سازی سیستم را بررسی کرده
و تصمیمات تاثیرگذار را شناسایی می‌کنیم. در ادامه با استفاده از پیاده‌سازی عملی این مورد تایید کرده و دست به بهبود آن می‌زنیم.
در ادامه به مرور راهکارهای بهبود می‌پردازیم.

همانطور که بیان شد در هر قسمت از معماری شکل \رجوع{شکل: معماری انتها به انتها سیستم مورد ارزیابی} انتخاب‌های مختلفی وجود دارد که هر یک تاثیرات منحصر به فرد خود را دارند،
این پیشنهاد رساله برای هر یک از این انتخاب‌ها در صورت وجود به پژوهش‌های پیشین ارجاع داده و در صورت لزوم و عدم پوشش کافی توسط کارهای پیشین، ارزیابی‌های لازم را صورت می‌دهد.
این ارزیابی‌ها در قالب شبیه‌سازی و پیاده‌سازی واقعی صورت خواهند پذیرفت و نتایج بدست آمده با آنچه که می‌توان از طریق تئوری مانند تئوری صف یا \متن‌لاتین{Network Calculus}
بدست آورد مقایسه می‌شوند. تئوری صف به ما برای محاسبه حالت میانگین کمک خواهد کرد و \متن‌لاتین{Network Calculus} از سوی دیگر برای یافتن کران‌های بالا کاربردی است.
اگر بخواهیم در رابطه با ابزارهای تئوری دقیقتر صحبت کنیم، ارسال داده توسط اشیا به صورت تصادفی است و ترافیک ماهیت تصادفی دارد بنابراین تئوری صف ابزار مناسبی برای تحلیل ترافیک به نظر می‌رسد،
از سوی دیگر همانطور که بیان شد سیستم از اجزای مختلفی تشکیل شده است که هر یک پردازش منحصر به فرد خود را دارند، \متن‌لاتین{Network Calculus} بیان می‌کند در صورت مدل سازی هر جز
می‌توانیم با استفاده از پیچش \متن‌لاتین{min-plus} مدل نهایی سیستم را بدست آوریم.

\قسمت{جمع‌بندی}

در این فصل مساله‌های اصلی این پیشنهاد رساله که ارزیابی انتها به انتها شبکه‌ی دسترسی \متن‌لاتین{LoRaWAN}
و لایه کاربرد \متن‌لاتین{LoRaWAN} هستند،
بیان شده و دلایل اهمیت آن، پارامترهای مورد ارزیابی و پارامترهای موثر ارائه شدند.
رویه پیشنهادی برای مساله مطرح شد و راهکارهایی که می‌توانستند به بهبود گلوگاه‌های سیستم کمک کنند ارائه شدند.
در ادامه این پیشنهاد رساله به بخشی از مساله ارزیابی شبکه دسترسی \متن‌لاتین{LoRaWAN} در قالب شبیه‌سازی بیشتر پرداخته خواهد شد.
